# Create the two network overlays
docker network create --driver overlay frontend
docker network create --driver overlay backend

# Create Service for the Python Voting Frontend App with 2 Replicas
docker service create --name voting-app -p 80:80 --network frontend --replicas 2 bretfisher/examplevotingapp_vote

# Create Service for the Redis Frontend Caching with 1 Replicas
docker service create --name redis-cache --network frontend redis:3.2

# Create Service for PostgreSQL DB for Backend Storage with 1 Replica
docker service create --name psql-db --network backend -e POSTGRES_HOST_AUTH_METHOD=trust --mount type=volue,source=psql-db-data,target=/var/lib/postgresql/data postgres:9.4

# Create Service for .NET Worker with Both Networks and 1 Replica
docker service create --name worker-service --network frontend --network backend bretfisher/examplevotingapp_worker

# Create Service for Node.JS Backend App with 1 Replica
docker service create --name results-app --network backend -p 5001:80 bretfisher/examplevotingapp_result